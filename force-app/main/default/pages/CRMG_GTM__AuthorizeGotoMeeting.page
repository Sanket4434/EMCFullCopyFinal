<apex:page controller="CRMG_GTM.AuthorizeGoToMeeting">
    <c:LightningStyle />
    <apex:form styleClass="Custom-Lightning-Style">
    
    <apex:pageBlock mode="edit">
        
    
         <apex:pageBlockSection title="User Set-up" columns="1" collapsible="false">
            <apex:pageBlockSectionItem >
                <apex:outputLabel >Meeting Duration</apex:outputLabel>
                <apex:inputField value="{!loggedInUser.CRMG_GTM__Meeting_Duration__c}"></apex:inputField>
            </apex:pageBlockSectionItem>
            <!--
            <apex:pageBlockSectionItem >
                <apex:outputLabel >Recurring Meeting Url</apex:outputLabel>
                <apex:inputField value="{!loggedInUser.Meeting_URL__c}" style="width: 40%;"></apex:inputField>
            </apex:pageBlockSectionItem>
            -->
            <apex:pageBlockSectionItem >
                <apex:outputLabel escape="true">Conference Call Info <a rel="tooltip" data-container="body" data-placement="top" title="Only use this field if your company has it's own person Conference Call details for your GoToMeeting calls">
                                               <img class="helpIcon" src="/s.gif"/>
                                            </a></apex:outputLabel>
                <apex:inputTextarea value="{!loggedInUser.CRMG_GTM__GTM_Conference_Call_Information_Rich__c}" richText="true" style="width:100%;height:300px;" ></apex:inputTextarea>
            </apex:pageBlockSectionItem>
            <apex:pageBlockSectionItem >
                <apex:outputLabel >GTM Expiration Date</apex:outputLabel>
                <apex:outputField value="{!loggedInUser.CRMG_GTM__GTM_Token_Expiration_Date__c}"></apex:outputField>
            </apex:pageBlockSectionItem>
    
       
    
        </apex:pageBlockSection>
      <div align="center">
     <apex:commandButton value="Save" action="{!UpdateUser}"></apex:commandButton>
     </div>
     <apex:pageBlockSection >
     </apex:pageBlockSection>
    </apex:pageBlock>
    <apex:pageBlock mode="edit">
        
      
         <apex:pageBlockSection title="Authorize GoToMeeting"  collapsible="false">
    
            <apex:commandButton value="Authorize GoToMeeting" 
            onclick="window.open('https://api.citrixonline.com/oauth/authorize?client_id={!gtmClientId}&redirect_uri={!redirect_uri}');return false;"/>
        </apex:pageBlockSection>
        
        <apex:pageBlockSection >
             <apex:outputPanel rendered="{!NOT(ISNULL(daysToExpiration))}" >
            <span style="color:red;font-style: italic;">
                You will be prompted to authenticate (Authorize GoToMeeting) again in {!daysToExpiration} days. <!-- Days to Authenticate {!daysToExpiration}-->
            </span>
        </apex:outputPanel>
        <apex:outputPanel rendered="{!ISNULL(daysToExpiration)}">
            <span style="color:red;font-style: italic;">
                You will be prompted to authenticate (Authorize GoToMeeting) again in {!daysToExpiration} days.
            </span>
        </apex:outputPanel>
        </apex:pageBlockSection>
        <apex:pageBlockSection >
       </apex:pageBlockSection>
    </apex:pageBlock>
    </apex:form>
    
</apex:page>